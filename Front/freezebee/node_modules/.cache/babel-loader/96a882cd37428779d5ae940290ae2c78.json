{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vince\\\\OneDrive\\\\Documents\\\\A5 - Option 1\\\\cybersecurite\\\\freezebee\\\\src\\\\pages\\\\loginPage.js\";\nimport React, { Component } from 'react';\nimport '../App.css';\nimport HomePage from '../pages/homePage';\nimport { Button, FormLabel, FormControl, Form, FormGroup } from 'react-bootstrap';\nimport { BrowserRouter as Router, Switch, Route, Link, Redirect } from 'react-router-dom';\nimport App from '../App';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst fetching = require('../encryption/fetching');\n\nclass LoginForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      username: '',\n      password: '',\n      auth: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    console.log('Login');\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    console.log(this.state);\n    fetching.CreateConnection('localhost:8080', '/Connection/Request/', (err, result) => {\n      if (!err) {\n        fetching.FetchAPI('localhost:8080', '/LogIn/', {\n          nom: this.state.username,\n          mdp: this.state.password\n        }, (err, result) => {\n          if (!err) {\n            localStorage.setItem('token', result.token);\n            this.setState({\n              auth: true,\n              erreur: err\n            });\n            console.log(this.state);\n            window.location.reload(true);\n          } else console.error(err);\n        });\n      } else console.error(err);\n    });\n  }\n  /*\r\n  addTokenIntoCache = (cacheName, url, response) => {\r\n      const data = new Response(JSON.stringify(response));\r\n        if ('caches' in window) {\r\n          caches.open(cacheName).then((cache) => {\r\n              cache.put(url, data);\r\n              console.log(data);\r\n          });\r\n      }\r\n  }\r\n  */\n\n\n  render() {\n    if (this.state.auth) {\n      return /*#__PURE__*/_jsxDEV(Router, {\n        children: /*#__PURE__*/_jsxDEV(Switch, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/\",\n            component: App\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Redirect, {\n            to: '/'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this);\n    } else if (this.state.erreur) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Erreur : \", this.state.erreur]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 20\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h-100 d-flex\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-display\",\n          children: /*#__PURE__*/_jsxDEV(Form, {\n            id: \"loginForm\",\n            onSubmit: this.handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n              className: \"mb-3\",\n              controlId: \"username\",\n              children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                children: \"Nom d'utilisateur\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n                required: true,\n                type: \"text\",\n                placeholder: \"Utilisateur\",\n                name: \"username\",\n                value: this.state.username,\n                onChange: this.handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n              className: \"mb-3\",\n              controlId: \"password\",\n              children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                children: \"Mot de passe\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n                required: true,\n                type: \"password\",\n                placeholder: \"Mot de passe\",\n                name: \"password\",\n                value: this.state.password,\n                onChange: this.handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              type: \"submit\",\n              children: \"Envoyer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n}\n\nexport default LoginForm;","map":{"version":3,"sources":["C:/Users/vince/OneDrive/Documents/A5 - Option 1/cybersecurite/freezebee/src/pages/loginPage.js"],"names":["React","Component","HomePage","Button","FormLabel","FormControl","Form","FormGroup","BrowserRouter","Router","Switch","Route","Link","Redirect","App","fetching","require","LoginForm","constructor","props","state","error","username","password","auth","handleChange","bind","handleSubmit","console","log","event","setState","target","name","value","preventDefault","CreateConnection","err","result","FetchAPI","nom","mdp","localStorage","setItem","token","erreur","window","location","reload","render"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAO,YAAP;AACA,OAAOC,QAAP,MAAqB,mBAArB;AACA,SAAQC,MAAR,EAAgBC,SAAhB,EAA2BC,WAA3B,EAAwCC,IAAxC,EAA8CC,SAA9C,QAA8D,iBAA9D;AACA,SAAQC,aAAa,IAAIC,MAAzB,EAAiCC,MAAjC,EAAyCC,KAAzC,EAAgDC,IAAhD,EAAsDC,QAAtD,QAAqE,kBAArE;AACA,OAAOC,GAAP,MAAgB,QAAhB;;;AAEA,MAAMC,QAAQ,GAAGC,OAAO,CAAC,wBAAD,CAAxB;;AAEA,MAAMC,SAAN,SAAwBhB,SAAxB,CAAkC;AAC9BiB,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AAACC,MAAAA,KAAK,EAAE,IAAR;AAAcC,MAAAA,QAAQ,EAAE,EAAxB;AAA4BC,MAAAA,QAAQ,EAAE,EAAtC;AAA0CC,MAAAA,IAAI,EAAE;AAAhD,KAAb;AAEA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBD,IAAlB,CAAuB,IAAvB,CAApB;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACH;;AAEDJ,EAAAA,YAAY,CAACK,KAAD,EAAQ;AAChB,SAAKC,QAAL,CACI;AAAC,OAACD,KAAK,CAACE,MAAN,CAAaC,IAAd,GAAqBH,KAAK,CAACE,MAAN,CAAaE;AAAnC,KADJ;AAGH;;AAEDP,EAAAA,YAAY,CAACG,KAAD,EAAQ;AAChBA,IAAAA,KAAK,CAACK,cAAN;AACAP,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKT,KAAjB;AACAL,IAAAA,QAAQ,CAACqB,gBAAT,CAA0B,gBAA1B,EAA4C,sBAA5C,EAAoE,CAACC,GAAD,EAAMC,MAAN,KAAiB;AACjF,UAAI,CAACD,GAAL,EAAU;AACNtB,QAAAA,QAAQ,CAACwB,QAAT,CAAkB,gBAAlB,EAAoC,SAApC,EAA+C;AAACC,UAAAA,GAAG,EAAE,KAAKpB,KAAL,CAAWE,QAAjB;AAA2BmB,UAAAA,GAAG,EAAE,KAAKrB,KAAL,CAAWG;AAA3C,SAA/C,EAAqG,CAACc,GAAD,EAAMC,MAAN,KAAiB;AAClH,cAAI,CAACD,GAAL,EAAU;AACNK,YAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BL,MAAM,CAACM,KAArC;AACA,iBAAKb,QAAL,CAAc;AAACP,cAAAA,IAAI,EAAE,IAAP;AAAaqB,cAAAA,MAAM,EAAER;AAArB,aAAd;AACAT,YAAAA,OAAO,CAACC,GAAR,CAAY,KAAKT,KAAjB;AACA0B,YAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,IAAvB;AACH,WALD,MAKOpB,OAAO,CAACP,KAAR,CAAcgB,GAAd;AACV,SAPD;AAQH,OATD,MASOT,OAAO,CAACP,KAAR,CAAcgB,GAAd;AACV,KAXD;AAYH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGIY,EAAAA,MAAM,GAAG;AACL,QAAI,KAAK7B,KAAL,CAAWI,IAAf,EAAqB;AACjB,0BACI,QAAC,MAAD;AAAA,+BACI,QAAC,MAAD;AAAA,kCACI,QAAC,KAAD;AAAO,YAAA,KAAK,MAAZ;AAAa,YAAA,IAAI,EAAC,GAAlB;AAAsB,YAAA,SAAS,EAAEV;AAAjC;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI,QAAC,QAAD;AAAU,YAAA,EAAE,EAAE;AAAd;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cADJ;AAQH,KATD,MASO,IAAI,KAAKM,KAAL,CAAWyB,MAAf,EAAuB;AAC1B,0BAAO;AAAA,gCAAe,KAAKzB,KAAL,CAAWyB,MAA1B;AAAA;AAAA;AAAA;AAAA;AAAA,cAAP;AACH,KAFM,MAEA;AACH,0BACI;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA,+BACI;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA,iCACI,QAAC,IAAD;AAAM,YAAA,EAAE,EAAC,WAAT;AAAqB,YAAA,QAAQ,EAAE,KAAKlB,YAApC;AAAA,oCACI,QAAC,SAAD;AAAW,cAAA,SAAS,EAAC,MAArB;AAA4B,cAAA,SAAS,EAAC,UAAtC;AAAA,sCACI,QAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,eAII,QAAC,WAAD;AAAa,gBAAA,QAAQ,MAArB;AAAsB,gBAAA,IAAI,EAAC,MAA3B;AAAkC,gBAAA,WAAW,EAAC,aAA9C;AAA4D,gBAAA,IAAI,EAAC,UAAjE;AAA4E,gBAAA,KAAK,EAAE,KAAKP,KAAL,CAAWE,QAA9F;AAAwG,gBAAA,QAAQ,EAAE,KAAKG;AAAvH;AAAA;AAAA;AAAA;AAAA,sBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAQI,QAAC,SAAD;AAAW,cAAA,SAAS,EAAC,MAArB;AAA4B,cAAA,SAAS,EAAC,UAAtC;AAAA,sCACI,QAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,eAII,QAAC,WAAD;AAAa,gBAAA,QAAQ,MAArB;AAAsB,gBAAA,IAAI,EAAC,UAA3B;AAAsC,gBAAA,WAAW,EAAC,cAAlD;AAAiE,gBAAA,IAAI,EAAC,UAAtE;AAAiF,gBAAA,KAAK,EAAE,KAAKL,KAAL,CAAWG,QAAnG;AAA6G,gBAAA,QAAQ,EAAE,KAAKE;AAA5H;AAAA;AAAA;AAAA;AAAA,sBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBARJ,eAeI,QAAC,MAAD;AAAQ,cAAA,OAAO,EAAC,SAAhB;AAA0B,cAAA,IAAI,EAAC,QAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAfJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cADJ;AAyBH;AACJ;;AArF6B;;AAwFlC,eAAeR,SAAf","sourcesContent":["import React, {Component} from 'react';\r\nimport '../App.css';\r\nimport HomePage from '../pages/homePage';\r\nimport {Button, FormLabel, FormControl, Form, FormGroup} from 'react-bootstrap';\r\nimport {BrowserRouter as Router, Switch, Route, Link, Redirect} from 'react-router-dom';\r\nimport App from '../App';\r\n\r\nconst fetching = require('../encryption/fetching');\r\n\r\nclass LoginForm extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {error: null, username: '', password: '', auth: false};\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        console.log('Login');\r\n    }\r\n\r\n    handleChange(event) {\r\n        this.setState(\r\n            {[event.target.name]: event.target.value}\r\n        );\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        console.log(this.state);\r\n        fetching.CreateConnection('localhost:8080', '/Connection/Request/', (err, result) => {\r\n            if (!err) {\r\n                fetching.FetchAPI('localhost:8080', '/LogIn/', {nom: this.state.username, mdp: this.state.password}, (err, result) => {\r\n                    if (!err) {\r\n                        localStorage.setItem('token', result.token);\r\n                        this.setState({auth: true, erreur: err});\r\n                        console.log(this.state);\r\n                        window.location.reload(true);\r\n                    } else console.error(err);\r\n                });\r\n            } else console.error(err);\r\n        });\r\n    }\r\n\r\n    /*\r\n    addTokenIntoCache = (cacheName, url, response) => {\r\n        const data = new Response(JSON.stringify(response));\r\n\r\n        if ('caches' in window) {\r\n            caches.open(cacheName).then((cache) => {\r\n                cache.put(url, data);\r\n                console.log(data);\r\n            });\r\n        }\r\n    }\r\n    */\r\n\r\n    render() {\r\n        if (this.state.auth) {\r\n            return (\r\n                <Router>\r\n                    <Switch>\r\n                        <Route exact path='/' component={App} />\r\n                        <Redirect to={'/'}></Redirect>\r\n                    </Switch>\r\n                </Router>\r\n            );\r\n        } else if (this.state.erreur) {\r\n            return <div>Erreur : {this.state.erreur}</div>\r\n        } else {\r\n            return (\r\n                <div className=\"h-100 d-flex\">\r\n                    <div className=\"form-display\">\r\n                        <Form id=\"loginForm\" onSubmit={this.handleSubmit}>\r\n                            <FormGroup className=\"mb-3\" controlId=\"username\">\r\n                                <FormLabel>\r\n                                    Nom d'utilisateur\r\n                                </FormLabel>\r\n                                <FormControl required type=\"text\" placeholder=\"Utilisateur\" name=\"username\" value={this.state.username} onChange={this.handleChange}>\r\n                                </FormControl>\r\n                            </FormGroup>\r\n                            <FormGroup className=\"mb-3\" controlId=\"password\">\r\n                                <FormLabel>\r\n                                    Mot de passe\r\n                                </FormLabel>\r\n                                <FormControl required type=\"password\" placeholder=\"Mot de passe\" name=\"password\" value={this.state.password} onChange={this.handleChange}>\r\n                                </FormControl>\r\n                            </FormGroup>\r\n                            <Button variant=\"primary\" type=\"submit\">\r\n                                Envoyer\r\n                            </Button>\r\n                        </Form>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default LoginForm;"]},"metadata":{},"sourceType":"module"}