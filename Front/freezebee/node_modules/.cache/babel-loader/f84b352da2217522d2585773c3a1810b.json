{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vince\\\\OneDrive\\\\Documents\\\\A5 - Option 1\\\\cybersecurite\\\\freezebee\\\\src\\\\pages\\\\loginPage.js\";\nimport React, { Component } from 'react';\nimport '../App.css';\nimport HomePage from '../pages/homePage';\nimport { Button, FormLabel, FormControl, Form, FormGroup } from 'react-bootstrap';\nimport { BrowserRouter as Router, Switch, Route, Link, Redirect } from 'react-router-dom';\nimport App from '../App';\nimport { useHistory } from 'react-router';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst fetching = require('../encryption/fetching');\n\nclass LoginForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      console.log(this.state);\n      fetching.CreateConnection('localhost:8080', '/Connection/Request/', (err, result) => {\n        if (!err) {\n          var _s = $RefreshSig$();\n\n          fetching.FetchAPI('localhost:8080', '/LogIn/', {\n            utilisateur: this.state.username,\n            motDePasse: this.state.password\n          }, _s((err, result) => {\n            _s();\n\n            if (!err) {\n              // this.addTokenIntoCache('Token', 'https://localhost:3000', result.token)\n              localStorage.setItem('token', result.token);\n              const history = useHistory();\n              history.go(0);\n            } else console.error(err);\n          }, \"9cZfZ04734qoCGIctmKX7+sX6eU=\", false, function () {\n            return [useHistory];\n          }));\n        } else console.error(err);\n      });\n    };\n\n    this.addTokenIntoCache = (cacheName, url, response) => {\n      const data = new Response(JSON.stringify(response));\n\n      if ('caches' in window) {\n        caches.open(cacheName).then(cache => {\n          cache.put(url, data);\n          console.log(data);\n        });\n      }\n    };\n\n    this.state = {\n      username: '',\n      password: '',\n      token: null\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    console.log('Login');\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  render() {\n    if (this.state.token) {\n      return /*#__PURE__*/_jsxDEV(Router, {\n        children: /*#__PURE__*/_jsxDEV(Switch, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/\",\n            component: App\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Redirect, {\n            to: '/'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h-100 d-flex\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-display\",\n          children: /*#__PURE__*/_jsxDEV(Form, {\n            id: \"loginForm\",\n            onSubmit: this.handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n              className: \"mb-3\",\n              controlId: \"username\",\n              children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                children: \"Nom d'utilisateur\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n                required: true,\n                type: \"text\",\n                placeholder: \"Utilisateur\",\n                name: \"username\",\n                value: this.state.username,\n                onChange: this.handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n              className: \"mb-3\",\n              controlId: \"password\",\n              children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                children: \"Mot de passe\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n                required: true,\n                type: \"password\",\n                placeholder: \"Mot de passe\",\n                name: \"password\",\n                value: this.state.password,\n                onChange: this.handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              type: \"submit\",\n              children: \"Envoyer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n}\n\nexport default LoginForm;","map":{"version":3,"sources":["C:/Users/vince/OneDrive/Documents/A5 - Option 1/cybersecurite/freezebee/src/pages/loginPage.js"],"names":["React","Component","HomePage","Button","FormLabel","FormControl","Form","FormGroup","BrowserRouter","Router","Switch","Route","Link","Redirect","App","useHistory","fetching","require","LoginForm","constructor","props","handleSubmit","event","preventDefault","console","log","state","CreateConnection","err","result","FetchAPI","utilisateur","username","motDePasse","password","localStorage","setItem","token","history","go","error","addTokenIntoCache","cacheName","url","response","data","Response","JSON","stringify","window","caches","open","then","cache","put","handleChange","bind","setState","target","name","value","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport '../App.css';\r\nimport HomePage from '../pages/homePage';\r\nimport {Button, FormLabel, FormControl, Form, FormGroup} from 'react-bootstrap';\r\nimport {BrowserRouter as Router, Switch, Route, Link, Redirect} from 'react-router-dom';\r\nimport App from '../App';\r\nimport { useHistory } from 'react-router';\r\n\r\nconst fetching = require('../encryption/fetching');\r\n\r\nclass LoginForm extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {username: '', password: '', token: null};\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        console.log('Login');\r\n    }\r\n\r\n    handleChange(event) {\r\n        this.setState(\r\n            {[event.target.name]: event.target.value}\r\n        );\r\n    }\r\n\r\n    handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        console.log(this.state);\r\n        fetching.CreateConnection('localhost:8080', '/Connection/Request/', (err, result) => {\r\n            if (!err) {\r\n                fetching.FetchAPI('localhost:8080', '/LogIn/', {utilisateur: this.state.username, motDePasse: this.state.password}, (err, result) => {\r\n                    if (!err) {\r\n                        // this.addTokenIntoCache('Token', 'https://localhost:3000', result.token)\r\n                        localStorage.setItem('token', result.token);\r\n                        const history = useHistory();\r\n                        history.go(0);\r\n                    } else console.error(err);\r\n                });\r\n            } else console.error(err);\r\n        });\r\n    }\r\n\r\n    addTokenIntoCache = (cacheName, url, response) => {\r\n        const data = new Response(JSON.stringify(response));\r\n\r\n        if ('caches' in window) {\r\n            caches.open(cacheName).then((cache) => {\r\n                cache.put(url, data);\r\n                console.log(data);\r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.state.token) {\r\n            return (\r\n                <Router>\r\n                    <Switch>\r\n                        <Route exact path='/' component={App} />\r\n                        <Redirect to={'/'}></Redirect>\r\n                    </Switch>\r\n                </Router>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"h-100 d-flex\">\r\n                    <div className=\"form-display\">\r\n                        <Form id=\"loginForm\" onSubmit={this.handleSubmit}>\r\n                            <FormGroup className=\"mb-3\" controlId=\"username\">\r\n                                <FormLabel>\r\n                                    Nom d'utilisateur\r\n                                </FormLabel>\r\n                                <FormControl required type=\"text\" placeholder=\"Utilisateur\" name=\"username\" value={this.state.username} onChange={this.handleChange}>\r\n                                </FormControl>\r\n                            </FormGroup>\r\n                            <FormGroup className=\"mb-3\" controlId=\"password\">\r\n                                <FormLabel>\r\n                                    Mot de passe\r\n                                </FormLabel>\r\n                                <FormControl required type=\"password\" placeholder=\"Mot de passe\" name=\"password\" value={this.state.password} onChange={this.handleChange}>\r\n                                </FormControl>\r\n                            </FormGroup>\r\n                            <Button variant=\"primary\" type=\"submit\">\r\n                                Envoyer\r\n                            </Button>\r\n                        </Form>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default LoginForm;"]},"metadata":{},"sourceType":"module"}